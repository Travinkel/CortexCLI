Programming II (E2025)
EASV Skabelon til nye kurser
Announcements

My git repos

About this course
Announcements

Exam Info
The formalities regarding the exam is described in the curriculum (2024 revision, can be downloaded here https://www.easv.dk/da/uddannelser/datamatiker/?tab=Uddannelsen )

Detailed exam procedure will be announced soon.

Information regarding the project and case can be found in section "3rd semester" in the general info Moodle room.


Course plan
Curriculum: Curriculum for Programming II  (Link to easv.dk)

Executive order: BEK nr 708 af 09/06/2023

Week 
(opt. lecturer)	Topic	Learning objectives from curriculum
33

React Crash Course: Components, Events, API communication, Routing	K1, S4, C3
34

React Crash Course: UI Frameworks, State management, Deployment	K2, S1, S2, S4, C3
35

.NET Web API's with C#	K1, S1, C1, C2, C3
36

Web API's II: Data Validation, Dependency Injection, Transfer Objects	K1, S1, S2, S3, C3 
37

Web API's III: Entity Framework	K1, S2, S4, C3
38,39,40

Full stack Web Application Project	K1, S1, S2, S3, C1, C2, C3
41

Advanced Querying (manual ordering ang pagination)	K1, S1, S2, S3, C1, C3
42

Autumn Holiday	 
43

Idempotent Updates	K1, S1, S2, S3, C1, C3
44

Querying with Sieve	K2, S1, S2, S3, C1, C2, C3
45

Recap	 
 


Exam
- 


W33: Crash Course Week 1
 
ðŸ“… Tuesday, August 12th: Intro to React & "Describing The UI"
 
 
ðŸŽ¯ Today's Agenda
Presentation: Welcome to 3rd semester & Introduction to the web

Exercise: Install prerequisites for Vite, React & Typescript development

Presentation: React: Components (expression embedding, writing markup, props, conditional rending, iterating, component tree)

Exercise: React components

 
ðŸ“š Videos for today's topics
My idea of a chronological starting point for new React developers:



I made a video about the package manager (+ how to set up React projects with Vite)



Then this video explains most of today's theory about React components:



From 8:30 the above video mostly cover's Tuesday's content about events and state.

 
ðŸŽ¯ Exercise: Install prerequisites for Vite & React
The recommended software is recommended for React development for the course:

Nodejs (& node package manager, which is automatically installed along with it). Can be downloaded and installed together here: https://nodejs.org/en/download

If you're on Windows, this seems to be the easiest installation method:

winget install -e --id OpenJS.NodeJS
Next, install Jetbrains Webstorm (preferred method for installation: Use Jetbrains Toolbox)

 
ðŸŽ¯ Exercise: Using React components
Start off by creating a new React+Vite app with:

#Create the app with
npm create vite

#Here if you get prompted with installing create react app, just press enter

#Install dependencies with (use in same directory as package.json)
npm install

#Run the app with
npm run dev
Each task has a simple description and a link to helpful documentation (optional to use)

Try and solve the following tasks: 

Make a "hello world!" component in React. (Simple text on UI)
Insert a React component into another component. [https://react.dev/learn/importing-and-exporting-components]
Make a React component which uses a prop / input. Test it with a simple string which you can display in the JSX / markup. [https://react.dev/learn/passing-props-to-a-component]
Make a list and use the .map() function to display a component for every element in the list. [https://react.dev/learn/rendering-lists]
Conditionally render some element. [https://react.dev/learn/conditional-rendering]
 
ðŸ“š Relevant literature for today's topics
The overall learning goals for today are covered in "Describing the UI" from the "Learn React" from react.dev here: https://react.dev/learn/describing-the-ui

 
 
ðŸ“… Wednesday, August 13th: Events & Interactivity
ðŸŽ¯ Today's Agenda
Presentation: Events and interactivity

Exercise: Events and interactivity

Presentation: State & useState hook

Exercise: Using useState

 
ðŸ“š Videos for today's topics


Notice that today's video is from 8:30 (continuation of yesterday's video). 

 
ðŸŽ¯ Exercise: Events and interactivity
Make a button that can trigger an event to log to the browser console. 
Make an input field where you can log the contents of the input field when enter text into the field.
Make an input field where you can select a date with type="date" attribute. Log the date when you select a date.
 
ðŸŽ¯ Exercise: Using UseState
Make a useState hook where you keep state of a simple string. Display the string on the user interface along with a button. When you click the button it should change the string.
Make an input element and two-way bind the input field to a useState hook.
Make a typescript interface with a string property and use as a generic type for the useState hook.
Make a simple "register" function with email, password and password repeat. Use a Typescript interface with all the values as properties as a model for the useState hook. If the passwords are fewer than 6 characters or don't match when a "register" button is pressed, present an alert() to the user.
Solution for the last step (which combines everything) can be found here: https://github.com/uldahlalex/events

Harder bonus task:

Add logic such that the "Repeat password" field only appears when the first password field contains at least 6 characters. (You can also "disable" the repeat password field if the first password field is not valid. https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/disabled instead of not rendering it)
Alternative to harder task: 

Much harder bonus task:

Add validation logic to the email field and password field such that:
an email must be a valid email
passwords must contain at least one upper+lower case letter, numeric character and special character.
 
ðŸ“š Relevant Literature
The overall learning goals for today are covered in "Adding Interactivity" from the "Learn React" from react.dev here: https://react.dev/learn/adding-interactivity

Example from class demo: https://github.com/uldahlalex/events/blob/master/src/App.tsx

 
 
ðŸ“… Thursday, August 14th: Network Requesting
ðŸŽ¯ Today's Agenda
Presentation: Sending network requests + Promises & async functions

Exercise: Testing an API manually

Exercise: HTTP request+response on button click with basic fetch()

Presentation: useEffect hook and typesafe API requesting

Exercise: Fetching data on component load

Exercise: Typesafe POST requesting

Presentation: Wrap up of typesafe requesting

 
ðŸ“š Videos for today's topics

Notice: Swagger-typescript-api now uses the "generate" sub-command if you're using the newest version. Example: 
npx swagger-typescript-api generate -p https://fakerestapi.azurewebsites.net/swagger/v1/swagger.json -o ./ -n Api.ts
 
ðŸŽ¯ Exercise: Testing an API manually
Task: Go to https://fakerestapi.azurewebsites.net/index.html and test that you can request /api/v1/Activities to get a list of all "activities":



 
ðŸŽ¯ Exercise: HTTP request+response on button click with basic fetch()
Task: We now want the list of activities from our own application. use fetch() on a button click to request the list of activities from before. Print the JSON body result to the console.

Example / relevant docs: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch

 
ðŸŽ¯ Exercise: Fetching data on component load
Task: A component uses a useState hook to display a list of "activities" on the UI. When the component loads, a useEffect() hook must be used to send a request to the API and call the useState hook's "set" function to update the state.

 
ðŸŽ¯ Exercise: Typesafe POST requesting
Now you must use swagger-typescript-api to generate boilerplate code for type-safe interaction with the API.

Use this command to generate the Typescript code: (execute from same directory as package.json)

npx swagger-typescript-api generate -p https://fakerestapi.azurewebsites.net/swagger/v1/swagger.json -o ./ -n Api.ts

Now use this code in a component to request the API. Example:

const MyApi = new Api({
    baseUrl: 'https://fakerestapi.azurewebsites.net'
});
const response = await MyApi.api
    .v1ActivitiesCreate({
        id: 1,
        dueDate: new Date().toISOString(),
        completed: true,
        title: 'hello world'
});

 
ðŸ“š Relevant Literature
Git repo from demonstration (international class, at the end of last exercise): https://github.com/uldahlalex/apidemo

My git repo used in today's video: https://github.com/uldahlalex/swager-typescript-api-demo

React's useEffect() hook: https://react.dev/reference/react/useEffect#usage

Browser's fetch() function to send requests: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch

Registry page for swagger-typescript-api: https://www.npmjs.com/package/swagger-typescript-api

 
 
ðŸ“… Friday, August 15th: Routing
ðŸŽ¯ Today's Agenda
Presentation: React Router Data Mode [25 minutes]

Exercise: Navigation Bar [45 minutes-ish]

Presentation: Wrap up of navigation bar exercise [20 minutes]

Exercise: Typescript arrays, string and objects

 
ðŸ“š Videos for today's topics


 
ðŸŽ¯ Exercise: Navigation bar
Task: Make a very simple app with a few different components and a navigation bar

It should be possible to navigate between routes and thereby changing the current view.

I recommend adding logic to each of the views to get data from the API we used yesterday: https://fakerestapi.azurewebsites.net/index.html

Below is a snippet of what a "navbar" + view could be: (with css, so just imagine it without)



After 45-ish minutes we'll wrap up and talk about how to solve the exercise.

 
ðŸŽ¯ Exercise: Typescript arrays, string and objects
I've made some Typescript "make the unit test pass" exercises.

Simply clone the following git repo: https://github.com/uldahlalex/tsexercises and follow instructions in the README.md file.

All in all: Fill out the functions to make the unit tests pass. I will also briefly talk about these exercises in class.

 
ðŸ“š Relevant Literature
Git repo from today's video with demo on setting up routes and relevant react hooks: http://github.com/uldahlalex/routing

React Router 7 Data Mode: https://reactrouter.com/start/modes#data

 
 
 

W34: Crash Course Week 2
ðŸ“… Monday, August 18th: UI libraries
ðŸŽ¯ Today's Agenda
Presentation: Component libraries & building interfaces with DaisyUI + Tailwind CSS tips + React hot toast
Exercise: Learn an arsenal of UI components
 
ðŸŽ¯ Exercise: Learn an arsenal of UI components
Installation instructions: Either create a totally new application with "npm create vite" (just like we always do) or use an existing application, like your Routing app from last Friday.Now, skip straight to step 2 in these instructions to add DaisyUI+Tailwind CSS: https://daisyui.com/docs/install/vite/
How to test it works:Make a button with className "btn":
<button className="btn">My button</button>

The button should look similar to this: 

If you want to explore different themes, then use this CSS instead of the snippet from the installation instruction:
@import "tailwindcss";
@plugin "daisyui" {
themes: all;
}

Then in index.html, you can add the attribute data-theme with the value being one of the available themes from here: https://daisyui.com/docs/themes/#list-of-themes

Example:



Now, the task is simple, yet open-ended:

Explore different DaisyUI components.

Do this by taking the JSX code snippets and modifying to your liking:



Here's my recommendation for a useful starting arsenal for CRUD apps:
- Accordion
- List
- Navbar or Menu or Dock (one of these for navigation elements)
- Dropdown
- Table

Use these (among others) to improve the visuals of your Routing app / whatever other React app your have.

Also recommended to check out: React Hot Toast: https://react-hot-toast.com/


 
ðŸ“š Relevant Literature
DaisyUI: https://daisyui.com/
Tailwind CSS: https://tailwindcss.com/
React Hot Toast: https://react-hot-toast.com/
 
 
 

 
ðŸ“… Tuesday, August 19th: Global State Management
 
ðŸŽ¯ Today's Agenda
Presentation: Global state management with Jotai
Exercise: Refactoring to global state for a pre-built application

Wrap-up: How to solve the exercise

 
ðŸ“š Videos for today's topics

 
ðŸŽ¯ Exercise: Sharing state between components
This application from last Friday uses useState containers to manage state. You must refactor it to use global state of authors and books: https://github.com/uldahlalex/routingdemo
If you want a practical introduction before doing the exercise, I recommend this one: https://tutorial.jotai.org/quick-start/intro
After about 45 minutes we will talk about a solution.
 
ðŸ“š Relevant literature for today's topics
Jotai Docs: https://jotai.org/docs

 
 

 
ðŸ“… Wednesday, August 20th: Deployment & Starting The React Project
 
 
ðŸŽ¯ Today's Agenda
Presentation: Deploying a React App With Docker

Exercise: Performing a Deployment

Presentation: The React Project

Workshop starts

 
ðŸ“š Videos for today's topics
This video [ONLY FROM 54:55 TO 01:01:55]

 
ðŸŽ¯ Exercise: Performing a Deployment
Sign up at Fly.io https://fly.io/ + add your billing details / credit card [This guide only uses free stuff but it still requires billing details / credit card]
If you don't have a credit card, want a different vendor or have any other objection to Fly.io I recommend finding another Vendor which can make docker deployments, such as Render: https://render.com/ (also has a free "Hobby" pricing tier with Docker deployments). Microsoft Azure also has 100 dollars of free credit if you use your school email.
Download the CLI from here https://fly.io/docs/flyctl/install/ and sign in with command "fly auth login"
Check you have a working installation of Docker (use docker ps command, for example: No errors should occur)
Make a React project with Vite. [Optionally test it locally first with "npm install", "npm run build" ("build" is the production version of "dev" and used for delivery) and "npm run preview". Open up the link you get when the build is over to test it].
Add this Dockerfile (yes, that's also the filename) in same directory as package.json: https://github.com/uldahlalex/todo/blob/master/client/Dockerfile
Test that you can build and run the app in Docker before you deploy to the cloud. Use "docker build -t client ." (dont forget the little dot and enter it in same directory as Dockerfile). Then do "docker run -p 8080:8080 client" to run it. Navigate to localhost:8080 in your browser to test.
In the same directory as Dockerfile and package.json use the command "fly launch --dockerfile ./Dockerfile" and provision your app. You can use samme preferences as I do in my video. The output is put in your fly.toml file afterwards. Mine are: (Notice the app name is unique to me)
Detaljer
# fly.toml app configuration file generated for awseometodoclient on 2025-08-01T09:25:08+02:00
#
# See https://fly.io/docs/reference/configuration/ for information about how to use this file.
#

app = 'awseometodoclient'
primary_region = 'fra'

[build]
  dockerfile = './Dockerfile'

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = 'stop'
  auto_start_machines = true
  min_machines_running = 0
  processes = ['app']

[[vm]]
  size = 'shared-cpu-1x'
 
5. When you want to trigger another deployment use "fly deploy" in same directory as fly.toml file. It will then build the docker image and deploy the docker container to the cloud. Now you know how to deploy an app and we can start building a bigger app.

 
ðŸŽ¯ The React Project: Petshop


Task: You must build a client application for an already existing server application

The server application runs on this address: https://api-divine-grass-2111.fly.dev/

The OpenAPI documentation page(Swagger) here: https://api-divine-grass-2111.fly.dev/swagger/index.html

These are the minimum user story requirements for your application:

As an application user I should be able to see the list of all pets
As an application user I should be able to see details for an individual pet using routing (/pet/:petId)
The pet detail page should also be able to toggle whether the pet is sold or not
The pet detail page should also be able to delete the pet
As an application user I should be able to create a new pet
These are the "bonus" user story requirements if you have additional time:

As an application user I want to be able to update every property of the pet except the ID
As an application user I want to look at styled components in the user interface + get feedback upon actions (like form submission; whether its successes or failures)
As a product owner the software must prioritize type-safety. Using appropriate models + generating Typescript client code using the provided documentation helps with this. [This one is recommended even if you're just doing the minimum requirements]
Also good to know:

There are no "role" requirements: The application user is simply both admin and "customer".
ID's are strings and not incremented numbers.
Everyone will see 2 public pets (Rex and Mittens) which cannot be changed or deleted. All other pets (created by you) are accessed only by your own browser so you can't spam each other (but still have full CRUD functionality).
If you're using the HTTP client generated using swagger-typescipt-api the "human-friendly message" of the error returned by the API can always be accessed like this (example toasts the error title to the user):


The underlying "Pet" entity in the database is illustrated below. Notice that each model for performing CRUD operations are specifically catered to that particular request/response (i.e, the "clientorigin" column for instance is only used to make sure no one can delete Rex and Mittens but everyone can delete their own pets. However, the returned objects never include "clientorigin" since it's redundant for the end user + client application development as a whole).

The models used for the API are named "Dto" standing for "Data transfer object". This simply means its a model i built for request/response purposes (and not the exact database model):

Practical details:

We will wrap up the project Monday, 25th of August. Here we will talk about how to solve the different user stories and look at some application examples before we proceed to the next chapter in Programming II.
I will be present Thursday and Friday, but there will not be any presentations. It's just project work and I'm available for help.
It's not a compulsory assignment, but rather a "guideline" for what is expected to be possible with approx. 24 hours of work for a single student.
You may work in any group setting.
You can submit the source code (link to Github) + deployment URL to your client app on the submission page I'm opening at the bottom of this Moodle page. (No, it's not mandatory, but I'd like to see your hard work and if you get stuck at home and I need to help I need a git link anyways. (+ version control practice is important anyways, so use git)).
My Recommendations for getting started:

    - npm create vite (as always)
    - Version control setup with git + deployment setup (for gradual deployments and version control commits)
    - send me your two links on Moodle (the assignment submission thingy. Your links dont change anyways so you might aswell do this instantly)
    - installing dependencies (npm install for things like react-router, jotai, DaisyUI, etc...)
    - setting up routes
    - swagger-typescript-api Typescript code generation from OpenAPI/Swagger specification (+ test you can get all pets)
    - defining atoms / setting up global state

 
ðŸ“š Relevant literature for today's topics
Fly Launch: https://fly.io/docs/launch/create/

Get Docker: https://docs.docker.com/get-started/get-docker/

 
Thursday and Friday consist entirely of workshops (no lessons). Office hours (availability) until 12:30 Friday. (I am available in the Danish class until 11.30, too).
 

Petshop links submission (git + deployment)

W35: .NET Web API's with C#
 
ðŸ“… Monday, August 25th: C# & .NET Intro
 
ðŸŽ¯ Today's Agenda
Wrap up of Petshop exercise
 
[Small break]
 
Presentation: Introduction to .NET
Exercises: Learning C# Syntax

 
Exercise: Installing relevant tools
Install following tools:
- .NET 9 SDK + Runtime from here: https://dotnet.microsoft.com/en-us/download
- Jetbrains Rider from Jetbrains Toolbox
 
 
Exercise: Syntax & expressing basic logic
 We start of with some basic training.
 You can pick any of the following "learning paths" depending on your preferences.
 For all of these paths I recommend you download this "C# for Java developers cheat sheet": https://download.microsoft.com/download/D/E/E/DEE91FC0-7AA9-4F6E-9FFA-8658AA0FA080/CSharp%20for%20Java%20Developers%20-%20Cheat%20Sheet.pdf
 
 Path A) Isolated exercises with guided solutions [Low reading + use your own IDE, non-interactive but with solutions]
 https://www.w3resource.com/csharp-exercises/
 
 Path B) Microsoft Learn introduction [Medium reading + use web-based editor + interactive]
 Microsoft Learn provides this interactive tutorial: https://learn.microsoft.com/en-us/training/paths/build-dotnet-applications-csharp/
 I recommend you skip the very last module "Create a web API with ASP.NET Core controllers" since that covers tomorrow's topic.
 
 Path C) Tour of C# from Microsoft Docs [Heavy reading]
 https://learn.microsoft.com/en-us/dotnet/csharp/tour-of-csharp/overview
 The docs are well written and a good introduction to C#. There is a large focus on language details, but I recommend you still do some syntax exercises to get it into your hands https://learn.microsoft.com/en-us/dotnet/csharp/tour-of-csharp/overview
 
ðŸ“š Relevant literature for today's topics
Relevant documentation about .NET can be found here: https://learn.microsoft.com/en-us/dotnet/

The code created in the Danish class demo can be found here: https://github.com/uldahlalex/dotnetdemo

 
 

 
ðŸ“… Tuesday, August 26th: REST Api's
 
ðŸŽ¯ Today's Agenda
Presentation: .NET Web API + Swagger/OpenAPI + Model Binding + Making JSON responses
Exercises: CRUD API with hardcoded data

 
Today's video(s)

 
 
 
ðŸŽ¯ Exercise: CRUD API with hardcoded data
For this exercise, use a single simple class "Person" with properties "Id", "Age", "Name".

You must make an API capable of the following actions: 

Can return a list of persons (can be hardcoded data)
Can create a new person and add to list of persons
Can update an existing person in the list
Can delete a person from the list
The actions should be possible to test from Swagger/OpenAPI

Once you have tested the "endpoints" from Swagger, build a small React application where you perform the CRUD operations (preferably using swagger-typescript-api).

Alternative path: If you like the "Microsoft Learn" interactive style of exercises, this one also covers today's topics: https://learn.microsoft.com/en-us/training/modules/build-web-api-aspnet-core/

 
 
Literature & References
The program we built in the Danish class:  https://github.com/uldahlalex/mywebapp.git

The program build in the international class: https://github.com/uldahlalex/myapidemo

 
 
 

W36: Web API's II
[Topics for week 36: Dependency injection, Data transfer objects, Data validation]


 
ðŸ“… Monday, September 1st: Transfer Objects, Dependency Injection, Server side Data Validation
 
 
ðŸŽ¯ Today's Agenda
Presentation: Dependency Injection in .NET, Transfer objects, mapping, server side data validation [35-40 minutes]
Exercise: Implementing request models & data validation [40-50 minutes]
Wrap-up of exercise [probably just one of the endpoints] [15 minutes]
Finish exercise
 
ðŸ“š Videos for today's topics




If you want a recap of writing controller methods before today's content, I recommend watching this one: 



 
ðŸŽ¯ Exercise 1: Request models + data validation
Based on your Pet shop API's (or Person API), we will add transfer objects, object mapping and implement global exception handling. 

If you want a different repo for this exercise, feel free to clone the repo we used last Wednesday for Systems Development (git repos: uldahlalex/qa [international] & uldahlalex/quality [danish] )

Here's the task:

The Pet/Person entity should have (at least) following properties: Id, CreatedAt (a timestamp: You can use DateTime.UtcNow()) + Name (and optionally more).
When Creating/Updating/Deleting, the Request Model should only expose the required properties for the given task.
Data validation on Request DTOs should be added as "Data Annotations" ( https://www.c-sharpcorner.com/article/data-annotations-in-net/ )
Test from Swagger that your API produces expected error messages and success responses.
 
ðŸ“š Relevant literature for today's topics
.NET Docs about DI: https://learn.microsoft.com/en-us/dotnet/core/extensions/dependency-injection

Repo for demo in Danish class: https://github.com/uldahlalex/serversidevalidation.git

Repo for demo in international class: https://github.com/uldahlalex/datavalidationdemo

 
 

 
ðŸ“… Tuesday, September 2nd: Entity Framework introduction with SQLite
 
ðŸŽ¯ Today's Agenda
Presentation: Working with Databases using an Object-Relational Mapper + Async/await
Exercise: Adding EntityFramework for Petshop(Full CRUD)
 
ðŸ“š Videos for today's topics


 
ðŸŽ¯ Exercise 1: Adding Entity Framework to your Petshop
Your Petshop should now use a SQLite database instead of in-memory list.

Here's the task in steps:

Either use your existing webshop or clone the demo repository from yesterday.
Install Micosoft.EntityFrameworkCore and Microsoft.EntityFrameworkCore.Sqlite Nuget packages to your project.
Change the "FakeDb / whatever you named the in-memory database" to an Entity Framework DbContext class. (You can simply use the context class from here https://github.com/uldahlalex/efdemo/blob/master/api/MyDbContext.cs )
Add the DbContext to Dependency Injection in Program.cs (builder.Services.AddDbContext<MyDbContext>()).
Also in the Program.cs class in the "app phase", ensure the database has been created with: 
var app = builder.Build();
using (var scope = app.Services.CreateScope())
{
    scope.ServiceProvider.GetRequiredService<MyDbContext>().Database.EnsureCreated();
}
In the PetService, use your constructor to require the DbContext instance and perform queries.
 
ðŸŽ¯ Exercise 2: Async + Abstractions
Your Petshop should now use asynchronous methods and feature interfaces. That means your method signatures generally should follow:

public async Task<ReturnType> MyMethod(params...) { }

+ All service classes (at least) should also implement an interface. 

 
ðŸ“š Relevant literature for today's topics
There is a getting started guide for Entity Framework with SQLite here: https://learn.microsoft.com/en-us/ef/core/get-started/overview/first-app?tabs=netcore-cli

Demo from Danish class: https://github.com/uldahlalex/entityframeworkdemo

Demo from International class: https://github.com/uldahlalex/efdemo

 
 

W37: Web API's III
There's no baby yet, so we still meet tomorrow. I will still make a Moodle Announcement if something should change.

 
ðŸ“… Monday, September 8th: Database Scaffolding / Reverse Engineering w/ Entity Framework
 
  Today's Agenda
Presentation: Scaffolding Entities + DbContext class using an existing Postgres Database

Exercise: Provisioning a Postgres Database and scaffolding

Wrap up + tips for multi-entity querying and "re-scaffolding" code

 
Today's Video
 


 
ðŸŽ¯ Exercise: Provisioning a Postgres Database & Performing Scaffolding
Provision a managed Postgres database. My favorite provider as of right now (free, no credit card) is Neon: https://neon.com/ 
Find a connection-string on their UI. When signed in to the dashboard find the "Connect to your database":


From here you can find the connection string (in different formats). Open the "Parameters only";



3. Connect to the database. Here I recommend simply using Rider's "Database" tool. Can be opened using the searching menu 

From here click the plus icon and select "Connect to Database".



Add data source manually:



And then fill out the values from the Neon DB parameters (port is just 5432).

Then you should open up a query console (right click on the database connection).

4. Now create a database schema. I recommend just making a simple Pet and Seller:

drop schema if exists petshop cascade;
create schema if not exists petshop;
create table petshop.seller (
                                id text primary key not null,
                                name text not null
);
create table petshop.pet (
    id text primary key not null,
    name text not null,
    breed text not null,
    createdAt timestamp with time zone not null,
    sold_date date default null,
    price numeric not null,
    seller text not null references petshop.seller(id)
);

6. Install the scaffolding CLI tool:

dotnet tool install -g dotnet-ef

7. Setup a .NET web project and install the required Nuget.

You can simply use the "dotnet new web" and change the .csproj file to the following:

<Project Sdk="Microsoft.NET.Sdk.Web">

    <PropertyGroup>
        <TargetFramework>net9.0</TargetFramework>
        <ImplicitUsings>enable</ImplicitUsings>
        <Nullable>enable</Nullable>
    </PropertyGroup>

    <ItemGroup>
        <PackageReference Include="Microsoft.EntityFrameworkCore.Design" Version="9.0.8">
            <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
            <PrivateAssets>all</PrivateAssets>
        </PackageReference>
        <PackageReference Include="Npgsql.EntityFrameworkCore.PostgreSQL" Version="9.0.4" />
    </ItemGroup>

</Project>


8. Perform the scaffolding:

First, use the .NET formatted connection-string:



Then use the command with your connection string:

dotnet ef dbcontext scaffold "YOURCONNECTIONSTRINGHERE" Npgsql.EntityFrameworkCore.PostgreSQL   --context MyDbContext     --no-onconfiguring        --schema petshop   --force
 

9. Dependency injection + usage

Now add the scaffolded context class to dependency injection in Program.cs and enjoy usage (add in your .NET connection string to the Neon Postgres DB)

using Microsoft.AspNetCore.Mvc;
using Microsoft.EntityFrameworkCore;
using scaf;

var builder = WebApplication.CreateBuilder(args);

builder.Services.AddDbContext<MyDbContext>(opts =>
{
    opts.UseNpgsql("YOUR CONNECTIONSTRING IN .NET FORMAT");
});

var app = builder.Build();

app.MapGet("/", ([FromServices] MyDbContext ctx) =>
{
    ctx.Sellers.Add(new Seller()
    {
        Id = Guid.NewGuid().ToString(),
        Name = "Bob"
    });
    ctx.SaveChanges();
    return ctx.Sellers.ToList();
});

app.Run();

If you get to this point, you're technically done with scaffolding, but let's not push the DB secret:


10. Protect the secret. 

My recommendation as of now is:

Make a .gitignore with "dotnet new gitgnore" + add appsettings.json to the gitignore file.
Then add the connection string to the appsettings.json with the name "Db"


3. Reference this in your code like this:

builder.Configuration.GetValue<string>("Db")

Then start making:

A couple of endpoints (some CRUD logic with 2 Entities).
Some schema changes to the database and triggering a scaffold again.
The codebase for this guide with snippets can also be found here (I used the exact same steps): https://github.com/uldahlalex/scaf

 
ðŸ“š Relevant literature for today's topics
Live demo from the Danish class: https://github.com/uldahlalex/MyEntityFrameworkScaffoldingDemo

Live demo from International class: https://github.com/uldahlalex/MyEfScaffoldingDemo

There's a written practical introduction to Scaffolding from the Docs here: https://learn.microsoft.com/en-us/ef/core/managing-schemas/scaffolding/?tabs=dotnet-core-cli

Scaffolding example codebase (taken today's exercise steps, so essentially a solution guide): https://github.com/uldahlalex/scaf

 
 

 
ðŸ“… Tuesday, September 9th: Working with cardinalities & multi-Entity API
 
   Today's Agenda
(no baby yet)

Presentation: Topics:

Entity Framework joins
Entity Framework Select / Projection, Response DTOs & mapping in general
Entity Circular references & JSON serialization
Exercise: Create a new data model + DTOs & mappers

Exercise: EF + LINQ Query practice

Depending on the amount of roadblocks I will do gradual catch-ups during the exercises.

 
Exercise: Create data transfer objects and mappers for a new data model
Either create a new database schema yourself with X number of tables and scaffold this into C# models + DbContext. Then create data transfer objects for this data model such that you have no circular references within your DTOs.

You can always check for circular references by marking the files in your IDE, right clicking and selecting Diagrams -> Show Type Dependency Diagram:



If you want an example schema to use, you can use this one:

drop schema if exists library cascade;
create schema if not exists library;

create table library.author (
    id text primary key not null,
    name text not null,
    createdAt timestamp with time zone
);

create table library.book (
    id text primary key not null,
    title text not null,
    createdAt timestamp with time zone
);

create table library.authorbookjunction (
    authorId text references library.author(id) on delete cascade,
    bookId text references library.book(id) on delete cascade,
    primary key (authorId, bookId)
)
 
Optional exercise 2: Practicing queries
I made an exercise repo last year with Entity Framework querying + LINQ querying: https://github.com/uldahlalex/RepositoryTraining

These exercises have built-in unit tests to check that your queries are correct.

 
References
Git repo from Danish class live demo: https://github.com/uldahlalex/EfDtos.git

Git repo from International class live demo: https://github.com/uldahlalex/internationaldtos

 
 

W38+39+40: Project
The "week 38+39+40 project" description can be found on the bottom of this page (below the agendas for Monday & Tuesday).

With specific regards to Wednesday 17th [Systems Development II.Testing lesson], this lesson is dedicated to work on the joint Programming+Systems Development project. I am available either via Zoom https://easv-dk.zoom.us/j/5425519295 from 10:00 -> 13:30 or via email throughout the entire day. There will not be a presentation in the classroom.

 
ðŸ“… Monday, September 15th
 
I will be available online Monday from 09:00 -> 13:30 for assistance. That means any questions related to the project (or any other topic) I will gladly assist.

You can join this Zoom link: https://easv-dk.zoom.us/j/5425519295 where you will be in a "waiting room" and then I'll let you in as soon as possible.

 
ðŸ“… Tuesday, September 16th
I'm "back" in the classroom for another lesson (yes, no baby yet). This time we're going into some more details about the project.
 
Agenda:
1) I will do a presentation on the following topics:
 
- The library data model and how to perform Entity Framework inserts + updates with the particular schema.
- Making a "seeding" / test data environment for tests and development
- How to handle http error response in the client app using the generated Typescript client
- Bonus: Powershell-specific script for reading .env files (specifically useful for Windows users)
+ Other etcetera topics I find relevant and helpful for completing the project.
 
2) Workshop for the remainder of the time (of course working on the week 38+39 project). 
 
As always: If there are any updates to Tuesday's schedule (meaning possible cancellation, I will make a Moodle announcement titled "Parental leave announcement". Until such an announcement is made, the lessons follow the normal "schedule".
 
Powershell script to source .env (for scaffolding) [Windows specific]:

# Read and parse .env file
Get-Content .env | ForEach-Object {
    if ($_ -match '^([^#][^=]+)=(.*)$') {
        $name = $matches[1].Trim()
        $value = $matches[2].Trim()
        [Environment]::SetEnvironmentVariable($name, $value, "Process")
    }
}

dotnet tool install -g dotnet-ef
dotnet ef dbcontext scaffold $env:CONN_STR Npgsql.EntityFrameworkCore.PostgreSQL --context MyDbContext --no-onconfiguring --schema library --force

Feedback based on http error reponse using Nswag.CodeGeneration.Typescript generated HTTP client:

}).catch(e => {
    if(e instanceof ApiException) {
        console.log(JSON.stringify(e))
        const problemDetails = JSON.parse(e.response) as ProblemDetails;
        toast(problemDetails.title)
    }
})
 

 
Project Description
 
Short introduction
Task: You will develop and deploy a full-stack web application.

The project spans until and including week 40. Monday week 41 we will start ordinary Programming lessons again with new topics.
You can either pick your own application idea or pick the one I have pre-defined. The technology requirements are the same: Only the "user stories" will be different.

You may work in groups of 1-3 people.

You must submit links to your public source code + deployment links + Github username (scroll to the bottom of this page to see submission page)

Each member should submit the links - also even if it is the same link.
If you submit the source code I will give you feedback on your project. If you don't want feedback for some reason, just write that in your README.md 
 
Relevant video: How to create a fullstack app from scratch with the tech stack we're using


 
 
Technology requirements [Applies to any app idea]
You must use .NET + C# API for the server application
You must use Controllers
You must have some level of data validation (especially on create/update/delete requests)
You must use Entity Framework
You must use Swager/OpenAPI to document your API
You must deploy the API using Docker
You must perform tests for your service logic using Dependency Injection (nuget Xunit.DependencyInjection) and TestContainers(nuget TestContainers.PostgreSql). Also see https://moodle.easv.dk/course/section.php?id=395845
The live demo examples are also very relevant (scroll down to "Relevant references")
You must use React + Typescript for the client application
You must use React Router
You must deploy the client app using Docker
You must version control your source code and use a public git repository
 
The Idea I have pre-defined (Includes a database schema for scaffolding)
The concept is a "library" (books, authors and genres).

It is not possible to "loan" a book (you may modify the schema / add tables if you want that feature aswell). Any other "features" you want such as image URL of books / authors, you may also modify the database for that.

Task: The goal is to have full CRUD on the 3 entities along with a working client application to browse/perform actions as an end-user.

POSTGRES SCHEMA:

drop schema if exists library cascade;
create schema if not exists library;

create table library.author
(
    id        text primary key not null,
    name      text             not null,
    createdAt timestamp with time zone
);

create table library.genre
(
    id        text primary key not null,
    name      text             not null,
    createdAt timestamp with time zone
);

create table library.book
(
    id        text primary key not null,
    title     text             not null,
    pages     int              not null,
    createdAt timestamp with time zone,
    genreId   text             references library.genre (id) on delete set null
);

create table library.authorbookjunction
(
    authorId text references library.author (id) on delete cascade,
    bookId   text references library.book (id) on delete cascade,
    primary key (authorId, bookId)
);

DIAGRAM:



 
 
Help & guidance
I have written a recommendation for steps to take in chronological order in order to complete the project. My guided solution example (partially done as of writing this) uses this "recipe" - each git commit in the source code repository corresponds with each step in the "recipe" below the image:  https://github.com/uldahlalex/ProjectSolution/



1) Set up folder structure + make git repository with git init and make a gitignore file with dotnet new gitignore (optionally also gitignore the file appsettings.json)

2) Create client app in "client" directory with npm create vite

3) Create server directory with c# projects Api (web), Tests (xunit3) and DataAccess (classlib)

4) Add relevant Nuget packages to each project, adjust .Net project versions, and add references Tests -> Api -> DataAccess

5) Provision a database at Postgres Neon and connect to it using Rider's Database Tool

6) Build tables in the database and perform scaffolding from DataAccess project [Also see Monday, week 37 in Programming II for scaffolding steps]

7) Add AppOptions

(optionally add  Dependency injection for your DbContext to test the app options or simply trigger the DataAnnotations validations for your AppOptions properties. In my solution I did dependency injection for DbContext a few steps later) 

[Also see Systems Development II.Testing week 37, exercise 3 for Options Pattern implementation steps]

8) Add Dependency injection + Middleware for controllers & Swagger/OpenAPI. Then add NSwag.CodeGeneration.Typescript  [Also see Systems Development II.Testing week 37, exercise 2 for NSwag Typescript generation steps]

9) Configure CORS in Program.cs with builder.Services.AddCors(); and app.UseCors(config => config.AllowAnyHeader().AllowAnyMethod().AllowAnyOrigin().SetIsOriginAllowed(x => true));

10) Add service classes & controller classes + Dependency injection for these

11) Create Response DTOs (and optionally define service + controller methods with signatures but empty implementation / throw new NotImplementedException(); )

You can also define constructors at this point, but I just did it in a later commit: https://github.com/uldahlalex/ProjectSolution/commit/a80d587fc9ddf12c5cb5d0b056644af4a02912a0

12) Create Dockerfile in your server directory (https://github.com/uldahlalex/todo/blob/master/server/Dockerfile (adjust path to your API project if necessary)) + fly launch to configure deployment

13) Adjust Program.cs to feature a ConfigureServices(IServiceCollection services) method (which you can call in your tests/Setup.cs file)

14) In your tests/Setup.cs, replace DbContext instance with a TestContainer instance https://github.com/uldahlalex/testcontainersdemointernational/blob/master/tests/Startup.cs

15) In your React app, set up Routing with React Router 7 data mode

16) Add jotai + jotai-devtools for global state management.

(If you want to add atoms right away, I recommend adding a few controller methods with the DTOs as response type such that you can use the models from the generated TS client file). 

17) Add UI library (like DaisyUI)

18) Configure development base URL & production base URL with Vite & instantiate Typescript HTTP client from generated code like this: https://github.com/uldahlalex/todo/blob/master/client/src/baseUrl.ts

19) Add Dockerfile to client directory like this https://github.com/uldahlalex/todo/blob/master/client/Dockerfile +  fly launch --dockerfile=./Dockerfile to configure deployment

At this point all configuration / setup / installations / boilerplate are pretty much done.

Each feature from this point can be implemented like this:

Build the UI element (button / input field, etc)
Build the state container + events for the UI elements
Figure out what data you need to send/retrieve from backend and make RequestDto and optionally response DTO from this
Build the Controller method
Build the Service method
Write a unit test for it
Re-run the API to generate the new Typescript code to use in React
Use the Typescript method to call your API from React
Make state change/feedback depending on success/failure
 
 
 

Project Links Submission

W41: Querying & More
 
ðŸ“… Monday, October 6th: Project Wrap-up + Pagination + Circular references in response models
 
Agenda
Project wrap-up
Presenting an example solution with library schema
Code walkthrough
Presentation: Circular References in response models with System.Text.Json's Reference Handler (Preserve) + npm package https://www.npmjs.com/package/dotnet-json-refs
Presentation: Adding pagination to queries
Activity: Pagination for Books [Exercise]
During the pagination activity time, if there's anything you want feedback/help on regarding the library project, I'm of course also available for this.
 
Today's Exercise: Paginating Books with circular references
Starting point: Either modify your existing API, or use my API from https://github.com/uldahlalex/projectsolution to do the following:

Task: Create an endpoint which queries "Books". It should be able to return a list of "Book" entity. The query should also take a "page number" + "books per page". Then make a small client application that can list books paginated.

A simple solution example for the "Authors" entity can be found here(the new client app is in the folder "pagination" and the new server logic is the "GetAuthors" service method + controller method + line 25-27 in Program.cs): https://github.com/uldahlalex/ProjectSolution/tree/pagination

Tips: 

Use "Skip()" and "Take()" with Entity Framework to perform the pagination. Below indicates page 2 with 5 per page:


In you React app you can lookup the query params from your address bar like this:


Performing the API call is simply attaching the page number and items per page as "skip" and "take" + resolving the circular references:


Going to "next" page is simply using "useNavigate" hook to change the query parameter (triggering a new useEffect call):


 
 
 

 
ðŸ“… Tuesday, October 7th: Ordering/Sorting Data
 
Agenda
Presentation: Querying combining Ordering + Pagination + Resolving circular references client side. [Server implementation]
Exercise: Performing ordering [Just do server implementation]
Presentation: Client implementation of topics
Exercise: Performing ordering [fullstack]
 
Exercise: Performing ordering
Make a controller endpoint for fetching Books.

The method parameter(s) should contain a request DTO. (I recommend a POST method since the DTO should preferably be transported in the request body) 

The DTO should include the following:

pagination (take, skip)
an ordering enum indicating different ways to sort/order the data.
In the NSwag generated Typescript client, the ordering enum should be represented as a Typescript enum.

The different ways to order the books should be the following (in ascending order of difficulty):

By name in ascending order (alphabetical starting from A)
By name in descending order
By longest book name
By most pages
By genre's name
By most recently created book (use the timestamp)
By most "productive" author books written by the author with most published books first. If two authors have equally many published books, sort the book alphabetically.
 
References & Further reading
There is a very general guide on filtering, sorting and pagination with Entity Framework on the microsoft docs here: https://learn.microsoft.com/en-us/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application 
 
 

W42: Autumn holiday
W43: Idempotent Updates
 
ðŸ“… Monday, October 20th: Idempotent Updates
 
Agenda
Presentation: Idempotent Updates
1-on-1 talks with students [concurrently with exercise]
 
Activity: 1-on-1 talks with students
Like mentioned in the Moodle announcement, we will talk about progression & well being with each student.

These talks will take place in the adjacent room (Danish talks will be in D16 and internationals in D18).

I will go through the class list alphabetically. I expect to spend the time after presentation Monday, Tuesday and probably Wednesday aswell on these talks.

 
Exercise: Test-driven-development style exercise: Performing updates
Task: Fill out remaining service methods for updates (or start with the "beginner" EF exercises in the same repo if you want a quick recap)

Step 1: Clone the repo

git clone https://github.com/uldahlalex/TestDrivenExercises
Then open it with Rider. Make sure you have Docker installed and running before you proceed.

Step 2: In Setup.cs, make a new implementation for the "updates" service class (using same abstraction) [You can always switch back in order to run the guided solutions]



Step 3: Fill out service methods and execute unit tests.

If you make it all the way to the end, I recommend you do the following:

Implement Idempotent Updates for your library solution / other CRUD app you've been working on and test that it works from Swagger. 

Tomorrow we will focus on the front-end part of performing updates.

 
 

 
ðŸ“… Tuesday, October 21st: Soft Deletion & More
 
Agenda
Presentation: Soft Deletions & More
1-on-1 talks with students [concurrently with exercise]
 
Activity: 1-on-1 talks with students
Just like yesterday, we will talk about progression & well being with each student.

These talks will take place in the adjacent room (Danish talks will be in D16 and internationals in D18).

I will go through the class list alphabetically. I expect to spend the time after presentation Monday, Tuesday and probably Wednesday aswell on these talks.

 
Exercise: Test Driven Development: New Soft Delete Exercises + Advanced business logic
Following the same procedure as yesterday, the git repo https://github.com/uldahlalex/TestDrivenExercises now has exercises on soft deletion + advanced business logic, which we will take a look at.



The first stuff will be demonstrated live in class and afterwards you will proceed with the exercises.

 
 

W44: Sieve
 
ðŸ“… Monday, October 27th: Sieve: Backend Section
 
Agenda
Presentation: Using Sieve For Data Filtration [30 minutes]
Exercise Set up and Sieve Usage From Swagger [50 minutes]
Activity: Group discussion about query framework [30 minutes]
Wrap-up of group discussion [30 minutes]
If anyone who were not present last week (43) for the 1-on-1's are available today, I strongly urge you to show up around 12 o'clock, and we'll talk there.

 
Exercise: Using Sieve
Task: For an existing .NET API, add and configure Sieve to enable filtration, ordering and pagination on a single entity (or several).

The codebase ready for implementation can be found here: https://github.com/uldahlalex/demowithsieve (1st commit has the implementation, newest commit is without sieve)

A finished example can be found here (built during international class, also see git commits for when sieve was added) https://github.com/uldahlalex/sievefilteringinternational

You may follow the instructions in the README.md here https://github.com/Biarity/Sieve or look at the code sample from the live demo we did during the beginning of the class.

Service methods sounds generally be able to "trigger" the query like this:

public Task<List<Computer>> GetComputers(SieveModel sieveModel)
{
    IQueryable<Computer> query = ctx.Computers;

    query = sieveProcessor.Apply(sieveModel, query);

    return query
        //here you can optionally do "Include()" to get navigation properties / "join"
        .ToListAsync();
}
Goal: Being able to pass a SieveModel object to the API and have the Sieve library query data for you (so test it like below:)



 
Activity: Discussion about Sieve
I will divide you into groups, and we will discuss the following and then wrap up collectively:

1) What are some limitations to the sieve library (in terms of querying data)?

2) What are ways in which Sieve could compromise developer experience or introduce bugs?

3) What are some ways in which Sieve can make a web application more vulnerable?

 
 

 
ðŸ“… Tuesday, October 28th: Full-stack Sieve With TS Query Building & React UI
 
Agenda
Presentation: Fullstack Sieve With Typesafe Querying
Exercise: Build a fullstack advanced querying system
 
Exercise: Fullstack Sieve
Task: Use an existing API with Sieve implemented (like this one from yesterday https://github.com/uldahlalex/sievefilteringinternational ) and build a front-end.

Here I recommend using the typesafe sieve query builder from here: https://npmjs.com/ts-sieve-query-builder

I.e: Build a "post" searching system (based on post properties like title, commentCount, etc). You may also use a different API / concept than post if you prefer.

Git repo from today's demo:

https://github.com/uldahlalex/sieveclientdemo

Documentation for the Typescript query builder can be found here: https://npmjs.com/ts-sieve-query-builder

 
 

W45: Group Formation Day + Course Recap
 
ðŸ“… Monday, November 3rd: Group Formation Day (+ the last 1-on-1's)
 
Agenda
09:00 and onward in D18: Activity: Group Formation Day [Danish + International] 

 
Activity: Group Formation Day
Some of you I spoke with about this concept during our 1-on-1's, and here it is: The group formation day.

The exam period is getting closer, and I want to offer an opportunity to form new constellations for those lacking a group (or who have a fractional group which could support more members)

The concept is as following:

09:00 in D18: Introduction: What are we and what are our individual ambitions and preferences for the upcoming project?

09:45: Pairing sessions (speed networking): Talk with different groups of people to discover new possible group constellations.

11:00: Wrap-up

At the end you may create your group on this self-select: https://moodle.easv.dk/mod/groupselect/view.php?id=259459&forceview=1

You're not obligated to partake in any group even if you show up for the group formation day - it is simply an offer for all those who would benefit from it.

The group formation day is deliberately scheduled for Monday, since it is the only day of the week where Danish and international can be present at the same time and place (for the dedicated time-frame, since we don't want to schedule things for Friday afternoon).

Danish and international students may be in the same group. (All Danes can speak english, and there are also Danish native students in the international class anyways)

 
 
 

 
ðŸ“… Tuesday, November 4th: Course Recap Day
 
Agenda
Activity 1: Kahoot & Cake
The Kahoot broadly captures concepts from the course. We will eat cake while we do the Kahoot.

Activity 2: Template building
 
Activity 2: Template building
The exam project case will be revealed next week (Thursday), but every application needs boilerplate code outside of business-specific code.

I will make an example "starter project" for .NET + React + Testing public for Thursday next week, but you should not miss out on the opportunity to create a business-agnostic template aswell.

Task: Meet with your exam project group (if you have made one yet) and make a git repository for your exam project template.

Any exam project will need the following regardless of what the case is:

Version control (with gitignore)
Project structure (.csproj's with correctly set up references[API, Testing, DataAccess])
Installation of relevant Nuget packages, for example:
Entity Framework
Swagger generation
Installation of relevant npm packages, for example:
React Router
UI library
Authentication + Authorization (registration, log in and protecting endpoints)
Testing setup with XUnit.DependencyInjection + TestContainers
Dockerfiles and fly.toml files for deployment
 
 
 

W46+ Exam Project Work
The exam case will be announced Thursday, November 13th (the day after the Cisco CCNA1 final quiz). 

Danish class: 10 o'clock in D18.

International class: 12 o'clock in D16.

Information regarding the exams can be found under "About this course" ->  "Exam info" in each course room.

Information regarding the project can be found on the 3rd semester section of the general semester info room. [Not yet public as of writing this, but it will of course be uploaded by the time the exam project is announced]

No lessons are scheduled from week 46. Time is dedicated entirely towards the exam project.

Group for exam project should be create here: https://moodle.easv.dk/mod/groupselect/view.php?id=259459&forceview=1 - Please create them as soon as possible.